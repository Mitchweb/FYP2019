"use strict";jQuery(document).ready(function(u){var e,a=0;e={action:"quiz_get_max_question_number",_quiz_nonce:u('input[name="_quiz_nonce"]').val(),_wp_http_referer:u('input[name="_wp_http_referer"]').val()},u.ajax({url:ajaxurl,type:"POST",data:e}).done(function(e){u("#add-question-target").removeClass("disabled");var t=JSON.parse(e);a=t}),u(document).on("click","#add-question-target",function(){var i,e;u(this).hasClass("disabled")||(i=++a,e={action:"quiz_fill_appears_after",_quiz_nonce:u('input[name="_quiz_nonce"]').val(),_wp_http_referer:u('input[name="_wp_http_referer"]').val()},u.ajax({url:ajaxurl,type:"POST",data:e}).done(function(e){var t=JSON.parse(e);u("#quiz-info-note").remove(),u("#add-answer-target-container").remove(),u("#add-question-target").replaceWith('<div id="question-'+i+'-container" class="question-container"><table class="form-table"><tbody><tr><th scope="row"><label for="quiz_Q'+i+'_title">Question</label></th><td><input name="quiz_Q'+i+'_title" type="text" id="quiz_Q'+i+'_title" value="" class="regular-text" /></td></tr><tr><th scope="row"><label for="quiz_Q'+i+'_appears_after">Appears after the following answers (IDs shown):</label></th><td><select name="quiz_Q'+i+'_appears_after" id="quiz_Q'+i+'_appears_after" class="appears-after" multiple></select></td></tr><tr><th scope="row"><label for="quiz_Q'+i+'_A1">Answer 1</label></th><td><input name="quiz_Q'+i+'_A1" type="text" id="quiz_Q'+i+'_A1" value="" class="regular-text" /><span id="quiz_Q'+i+'_A1_id" class="answer-id"></span></td></tr><tr><th scope="row"><label for="quiz_Q'+i+'_A2">Answer 2</label></th><td><input name="quiz_Q'+i+'_A2" type="text" id="quiz_Q'+i+'_A2" value="" class="regular-text" /><span id="quiz_Q'+i+'_A2_id" class="answer-id"></span></td></tr><tr id="add-answer-target-container"><td id="add-answer-target" class="button button-secondary" data-question="'+i+'">Add Answer</td></tr></tbody></table><div class="edit-question-container"><p id="delete-question-target" class="button button-delete-question disabled" data-question="'+i+'">Delete Question</p><p id="save-question-target" class="button button-update-question" data-question="'+i+'">Save Question</p></div></div><p id="add-question-target" class="button button-secondary disabled">Add Question</p>');for(var a=0;a<t.all.length;a++){var n=t.all[a].answer_id;u("#quiz_Q"+i+"_appears_after").append('<option value="'+n+'">'+n+"</option>")}}))}),u(document).on("click","#add-answer-target",function(){if(!u(this).hasClass("disabled")){var e,t=u(this).data("question");e=t,u("#add-answer-target-container").replaceWith('<tr><th scope="row"><label for="quiz_Q'+e+'_A3">Answer 3</label></th><td><input name="quiz_Q'+e+'_A3" type="text" id="quiz_Q'+e+'_A3" value="" class="regular-text" /><span id="quiz_Q'+e+'_A3_id" class="answer-id"></span></td></tr>')}}),u(document).on("click","#save-question-target",function(){var a,n,e,t=u(this).data("question"),i=u("#question-"+t+"-container");a=t,n=i,e={action:u('input[name="action"]').val(),_quiz_nonce:u('input[name="_quiz_nonce"]').val(),_wp_http_referer:u('input[name="_wp_http_referer"]').val(),question_number:a,question_string:u("#quiz_Q"+a+"_title").val(),answer_list:u("#quiz_Q"+a+"_appears_after").val(),answer_string_1:u("#quiz_Q"+a+"_A1").val(),answer_string_2:u("#quiz_Q"+a+"_A2").val(),answer_string_3:u("#quiz_Q"+a+"_A3").val()},u.ajax({url:ajaxurl,type:"POST",data:e}).done(function(e){var t=JSON.parse(e);n.find("label").addClass("disabled"),n.find("input").attr("disabled","disabled"),n.find("select").attr("disabled","disabled"),n.find("#add-answer-target-container").remove(),n.find("#save-question-target").replaceWith('<p id="update-question-target" class="button button-update-question" data-question="'+a+'">Update Question</p>'),n.find("#delete-question-target").removeClass("disabled"),u("#add-question-target").removeClass("disabled"),u("#quiz_Q"+a+"_A1_id").text("ID: "+t.answer_id_1),u("#quiz_Q"+a+"_A2_id").text("ID: "+t.answer_id_2),u("#quiz_Q"+a+"_A3_id").text("ID: "+t.answer_id_3)})}),u(document).on("click","#update-question-target",function(){var r,d,e,t=u(this).data("question"),a=u("#question-"+t+"-container");r=t,d=a,e={action:"quiz_fill_appears_after",_quiz_nonce:u('input[name="_quiz_nonce"]').val(),_wp_http_referer:u('input[name="_wp_http_referer"]').val(),question_number:r},u.ajax({url:ajaxurl,type:"POST",data:e}).done(function(e){var t=JSON.parse(e);d.find("label").removeClass("disabled"),d.find("input").removeAttr("disabled"),d.find("select").removeAttr("disabled"),0==u("#quiz_Q"+r+"_A3").length&&d.find("tbody").append('<tr id="add-answer-target-container"><td id="add-answer-target" class="button button-secondary" data-question="'+r+'">Add Answer</td></tr>'),d.find("#update-question-target").replaceWith('<p id="save-question-target" class="button button-update-question" data-question="'+r+'">Save Question</p>'),d.find("#delete-question-target").addClass("disabled"),u("#add-question-target").addClass("disabled"),u("#quiz_Q"+r+"_appears_after").html("");for(var a=0;a<t.all.length;a++){var n=t.all[a].answer_id;u("#quiz_Q"+r+"_appears_after").append('<option value="'+n+'">'+n+"</option>")}var i=[];for(a=0;a<t.selected.length;a++){var s=t.selected[a].answer_id;i.push(s)}u("#quiz_Q"+r+"_appears_after").val(i)})}),u(document).on("click","#delete-question-target",function(){if(!u(this).hasClass("disabled")){var e,t,a,n=u(this).data("question"),i=u("#question-"+n+"-container");e=n,t=i,a={action:"quiz_delete_question",_quiz_nonce:u('input[name="_quiz_nonce"]').val(),_wp_http_referer:u('input[name="_wp_http_referer"]').val(),question_number:e,question_string:u("#quiz_Q"+e+"_title").val()},u.ajax({url:ajaxurl,type:"POST",data:a}).done(function(e){u("#add-question-target").removeClass("disabled"),t.remove()})}}),u("#switch-organisation").change(function(){console.log(u(this).val());var e={action:"attributes_switch_organisation",organisation_id:u(this).val()};u.ajax({url:ajaxurl,type:"POST",data:e}).done(function(e){var t=JSON.parse(e);u("#quiz_save_attributes_table").find("select").val(0),t.forEach(function(e){u("select#"+e).val(1)})})})});